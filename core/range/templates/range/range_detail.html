{% extends "core/core_base.html" %}


{% block core_content %}

    <span class='dns-title'>Range: Start {{ range.start_str }} End: {{ range.end_str}}</span>


    {% block action_bar %}
        {% if range.get_edit_url %}
            <a class="btn btn-primary" href="{{ range.get_edit_url() }}">Edit</a>
        {% endif %}

        {% block mid_action_bar %}
        {% endblock %}

        {% if range.get_delete_url %}
            <a class="btn btn-danger" href="{{ range.get_delete_url() }}">Delete</a>
        {% endif %}
    {% endblock %}
    <br>
    <p>This range is in the network <a href='{{ range.network.get_absolute_url()}}'>{{ range.network.network_str }}</a>
    {% if range.network.vlan %}
    , which is associated with the vlan <a href="{{ range.network.vlan.get_absolute_url() }}">{{ range.network.vlan.name }} ({{ range.network.vlan.number }})</a>
    {% endif %}

    {% if range.network.site %}
    in <a href="{{ range.network.site.get_absolute_url() }}">{{ range.network.site.get_full_name() }}</a>.
    {% else %}
    .
    {% endif %}
    <span>See <a href="/core/build/{{range.network.pk}}/">DHCP Build Output</a>.</span>
    {% if attrs %}
    <table class="table">
        <thead>
            {% for attr in attrs %}
                <th>{{ attr.key }}</th>
            {% endfor %}
        </thead>

        <tbody>
            <tr>
            {% for attr in attrs %}
                <td>{{ attr.value }}</td>
            {% endfor %}
            </tr>
        </tbody>
    </table>
    {% endif %}

    {% if range_data %}
        <table class="table">
            <thead>
                    <th>IP</th>
                    <th>Object</th>
                    <th>Action</th>
            </thead>

            <tbody>
                {% for object in range_data %}
                    <tr>
                        <td>
                            {{ object[1] }}
                        </td>

                        {% if object[0] == "A/PTR" %}
                        <td>
                            {{ object[3].fqdn }} (<a href="{{ object[3].get_absolute_url() }}">A</a>/<a href="{{ object[2].get_absolute_url() }}">PTR</a>)
                        </td>
                        <td>
                            <b>Combine</b> <a href="/core/interface/combine_a_ptr_to_interface/{{ object[3].pk}}/{{ object[2].pk }}/">A/PTR to Interface.</a>
                        </td>
                        {% elif object[0] == "Interface" %}
                        <td>
                            Interface (<a href="{{ object[2].get_absolute_url() }}">{{ object[2].fqdn }}</a>) for System
                            <a href="{{ object[2].system.get_absolute_url() }}">{{ object[2].system }}</a>
                        </td>
                        <td>
                        </td>
                        {% elif object[0] == "A" %}
                            <td>
                                A <a href="{{ object[2].get_absolute_url() }}">{{ object[2].fqdn }}</a>
                            </td>
                        {% elif object[0] == "PTR" %}
                            <td>
                                PTR <a href="{{ object[2].get_absolute_url() }}">{{ object[2].name }}</a>
                            <td>
                        <td>
                        </td>
                        {% else %}
                        <td>
                            <b>Free</b>
                        </td>
                        <td>
                            Create <a href="/mozdns/address_record/create/?ip_str={{ object[1]}}&ip_type=4">A</a> 
                                    <a href="/mozdns/ptr/create/?ip_str={{ object[1]}}&ip_type=4">PTR</a> 
                                    <a href="/core/interface/create/?ip_str={{ object[1]}}&ip_type=4">Interface</a>
                        </td>
                        {% endif %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% endif %}


{% endblock %}
